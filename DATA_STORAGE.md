# 数据存储方案说明

本文档旨在说明当前应用的数据存储机制、其局限性以及未来的改进方向。

## 当前方案：基于 React Context 和内存存储

目前，本应用的数据（包括任务和博客文章）完全存储在前端的**内存**中。我们通过 React 的 **Context API** (`AppContext`) 来实现这一方案。

### 工作原理

1.  **初始数据**：应用启动时，会从 `src/lib/data.ts` 文件中加载一组初始的、写死的数据。
2.  **状态管理**：这些数据被存放在一个位于 `src/context/AppContext.tsx` 的全局 React Context state 中。
3.  **数据操作**：当用户执行创建、更新或删除等操作时（例如，添加一篇新博客），应用实际上是在更新这个全局 Context 中的 state。
4.  **组件同步**：应用中所有消费了该 Context 的组件都会自动响应 state 的变化，并重新渲染，从而在界面上反映出最新的数据。例如，在博客列表页，您能立即看到新添加的博客。

### 局限性

这种纯前端、基于内存的方案具有一个**致命的局限性**：

**数据是非持久化的。**

这意味着所有的数据更改都只存在于当前的用户会话中。一旦发生以下情况，所有更改都将丢失，应用将恢复到 `data.ts` 中的初始状态：

-   **刷新浏览器页面**
-   关闭并重新打开浏览器标签页
-   直接通过 URL 访问应用的某个页面（可能导致应用状态重新初始化）

这就是为什么您在创建一篇新博客后，虽然能在列表页看到它，但刷新页面或直接访问该博客的链接时可能会遇到 **404 错误**的原因——因为当应用重新加载时，您在内存中创建的那篇博客已经“消失”了。

## 未来方向：集成 Firebase Firestore

为了实现真正的**数据持久化**，我们需要一个后端的数据库解决方案。

**Firebase Firestore** 是一个理想的选择。它是一个灵活、可扩展的 NoSQL 云数据库，可以轻松地与我们的 Next.js 应用集成。

### 迁移步骤

1.  **设置 Firebase 项目**：在 Firebase 控制台中创建一个项目并启用 Firestore 数据库。
2.  **集成 Firebase SDK**：在我们的应用中配置 Firebase SDK，以便与 Firestore 进行通信。
3.  **重构数据逻辑**：
    -   将所有的数据读取操作（如获取任务列表、博客列表）从访问 `AppContext` 改为从 Firestore 查询数据。
    -   将所有的数据写入操作（如创建、更新、删除）从更新 Context state 改为向 Firestore 发送请求。
4.  **实时更新**：可以利用 Firestore 的实时监听功能，当数据库中的数据发生变化时，自动更新前端界面，提供无缝的实时体验。

通过迁移到 Firestore，我们可以确保所有用户数据都能被安全、持久地存储，彻底解决当前方案的局限性。